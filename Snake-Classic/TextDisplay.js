var playerMoves = false,
	readyPlayer = false,
	data;




function readyUP(){
	if (playerMoves == false) {
		return ["MOVES[WASD]","SPEED[SPACE-BAR]"];
	}else{
		return ["READY","--SET---GO>"];
	}
}



function drawText(){
	let i = -1,
		timeout = 0,
		cnt  = 0,
		textY = 0,
		textX = 0,
		center  = 16,
		clr = false,
		ex = 0,
		colour = "#607d8b",
		remove = false,
		prov = [[],[]],
		duration = true,
		closeAnim = 0,
		stopAnim = true;

	// change text
	text = readyUP();

	function timer(ms) {return new Promise(res => setTimeout(res, ms));}
	async function load() {
		
		while (stopAnim){

			if (duration) {
				i < text[cnt].length && remove == false?i++:i--;
				cnt == 0?center = 15:center = 24;
				
	
				let textDataY = data[text[cnt][i]]["Capital"]["Y"];
				let textDataX = data[text[cnt][i]]["Capital"]["X"];
	
				if (remove == false) {
					if (i <= 4) {textX = parseInt((gridX/2-12)+ex)+(5*i);}
					if (i >= 5) {textY = 6;colour = "#f44336";textX = parseInt((gridX/2-center)+ex)+(5*(i-5))}
					if (("]").includes(text[cnt][i+1])) {ex-=1}
					if (("MZYVW").includes(text[cnt][i])) {ex+=1}
					if (("[").includes(text[cnt][i])) {ex-=2}
					if ( ("-").includes(text[cnt][i+1]) && ("E").includes(text[cnt][i])) {ex-=1}
	
					prov[0][i] = textX;
					prov[1][i] = textY;
	
					}else{
						textX = prov[0][i];
						textY = prov[1][i];
						colour = "";
					}
	
	
					 // draws the actual text
					for (var j = 0; j < Object.keys(textDataY).length; j++) {
						document.getElementsByTagName('UL')[textDataY[Object.keys(textDataY)[j]]+textY].getElementsByTagName('LI')[textDataX[Object.keys(textDataY)[j]]+textX].style.background=colour;
					}
	
					// trigger event to clear text
					if (i >= text[cnt].length-1 && remove == false) {
						i = text[cnt].length;
						remove = true;
						duration = false;

					}else if (i <= 0 && remove == true) {
						i = -1
						cnt == 1?cnt = 0:cnt = 1;
						textY = 0
						textX = 0
						center  = 16
						ex = 0
						colour = "#607d8b"
						remove = false;

						// change text
						text = readyUP();
						if (playerMoves == true && clr == false) {cnt = 0;clr = true}

						// Stops this loop from happening
						if (clr == true && (closeAnim+=1) >= 3) {stopAnim = false;readyPlayer = true}
					}
				}

				// animation delay
				if (duration == false) {
					if (timeout++ > 20) {timeout = 0;duration = true}
				}

			await timer(70);
		}
	}load();
}



function LoadSplashText() {
	data = jsonData();
	drawText();
}

function jsonData(){
	return	{"0":{"Capital":{"X":{"10":0,"13":3,"20":0,"23":3,"30":0,"33":3,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"13":1,"20":2,"23":2,"30":3,"33":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"1":{"Capital":{"X":{"11":1,"12":2,"22":2,"32":2,"42":2,"02":2},
			"Y":{"11":1,"12":1,"22":2,"32":3,"42":4,"02":0}},"Small":{"X":{},
			"Y":{}}},"2":{"Capital":{"X":{"13":3,"20":0,"21":1,"22":2,"23":3,"30":0,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"13":1,"20":2,"21":2,"22":2,"23":2,"30":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"3":{"Capital":{"X":{"13":3,"21":1,"22":2,"23":3,"33":3,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"13":1,"21":2,"22":2,"23":2,"33":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"4":{"Capital":{"X":{"10":0,"20":0,"22":2,"30":0,"31":1,"32":2,"33":3,"42":2,"00":0},
			"Y":{"10":1,"20":2,"22":2,"30":3,"31":3,"32":3,"33":3,"42":4,"00":0}},"Small":{"X":{},
			"Y":{}}},"5":{"Capital":{"X":{"10":0,"20":0,"21":1,"22":2,"23":3,"33":3,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"20":2,"21":2,"22":2,"23":2,"33":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"6":{"Capital":{"X":{"10":0,"20":0,"21":1,"22":2,"23":3,"30":0,"33":3,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"20":2,"21":2,"22":2,"23":2,"30":3,"33":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"7":{"Capital":{"X":{"13":3,"22":2,"32":2,"42":2,"00":0,"01":1,"02":2,"03":3},
			"Y":{"13":1,"22":2,"32":3,"42":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"8":{"Capital":{"X":{"10":0,"13":3,"20":0,"21":1,"22":2,"23":3,"30":0,"33":3,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"13":1,"20":2,"21":2,"22":2,"23":2,"30":3,"33":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"9":{"Capital":{"X":{"10":0,"13":3,"20":0,"21":1,"22":2,"23":3,"33":3,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"13":1,"20":2,"21":2,"22":2,"23":2,"33":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"|":{"Capital":{"X":{"11":1,"13":3,"21":1,"23":3,"31":1,"33":3},
			"Y":{"11":1,"13":1,"21":2,"23":2,"31":3,"33":3}},"Small":{"X":{},
			"Y":{}}},">":{"Capital":{"X":{"11":1,"12":2,"21":1,"22":2,"23":3,"31":1,"32":2,"41":1,"01":1},
			"Y":{"11":1,"12":1,"21":2,"22":2,"23":2,"31":3,"32":3,"41":4,"01":0}},"Small":{"X":{},
			"Y":{}}},"[":{"Capital":{"X":{"10":0,"20":0,"30":0,"40":0,"41":1,"00":0,"01":1},
			"Y":{"10":1,"20":2,"30":3,"40":4,"41":4,"00":0,"01":0}},"Small":{"X":{},
			"Y":{}}},"]":{"Capital":{"X":{"12":2,"22":2,"32":2,"41":1,"42":2,"01":1,"02":2},
			"Y":{"12":1,"22":2,"32":3,"41":4,"42":4,"01":0,"02":0}},"Small":{"X":{},
			"Y":{}}},",":{"Capital":{"X":{"32":2,"41":1},
			"Y":{"32":3,"41":4}},"Small":{"X":{},
			"Y":{}}},".":{"Capital":{"X":{},
			"Y":{}},"Small":{"X":{},
			"Y":{}}},"A":{"Capital":{"X":{"10":0,"13":3,"20":0,"21":1,"22":2,"23":3,"30":0,"33":3,"40":0,"43":3,"01":1,"02":2},
			"Y":{"10":1,"13":1,"20":2,"21":2,"22":2,"23":2,"30":3,"33":3,"40":4,"43":4,"01":0,"02":0}},"Small":{"X":{},
			"Y":{}}},"B":{"Capital":{"X":{"10":0,"13":3,"20":0,"21":1,"22":2,"23":3,"30":0,"33":3,"40":0,"41":1,"42":2,"00":0,"01":1,"02":2},
			"Y":{"10":1,"13":1,"20":2,"21":2,"22":2,"23":2,"30":3,"33":3,"40":4,"41":4,"42":4,"00":0,"01":0,"02":0}},"Small":{"X":{},
			"Y":{}}},"C":{"Capital":{"X":{"10":0,"20":0,"30":0,"41":1,"42":2,"43":3,"01":1,"02":2,"03":3},
			"Y":{"10":1,"20":2,"30":3,"41":4,"42":4,"43":4,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"D":{"Capital":{"X":{"10":0,"13":3,"20":0,"23":3,"30":0,"33":3,"40":0,"41":1,"42":2,"00":0,"01":1,"02":2},
			"Y":{"10":1,"13":1,"20":2,"23":2,"30":3,"33":3,"40":4,"41":4,"42":4,"00":0,"01":0,"02":0}},"Small":{"X":{},
			"Y":{}}},"E":{"Capital":{"X":{"10":0,"20":0,"21":1,"22":2,"30":0,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"20":2,"21":2,"22":2,"30":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"F":{"Capital":{"X":{"10":0,"20":0,"21":1,"22":2,"30":0,"40":0,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"20":2,"21":2,"22":2,"30":3,"40":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"G":{"Capital":{"X":{"10":0,"20":0,"22":2,"23":3,"30":0,"33":3,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"20":2,"22":2,"23":2,"30":3,"33":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"H":{"Capital":{"X":{"10":0,"13":3,"20":0,"21":1,"22":2,"23":3,"30":0,"33":3,"40":0,"43":3,"00":0,"03":3},
			"Y":{"10":1,"13":1,"20":2,"21":2,"22":2,"23":2,"30":3,"33":3,"40":4,"43":4,"00":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"I":{"Capital":{"X":{"12":2,"22":2,"32":2,"42":2,"02":2},
			"Y":{"12":1,"22":2,"32":3,"42":4,"02":0}},"Small":{"X":{},
			"Y":{}}},"J":{"Capital":{"X":{"12":2,"22":2,"32":2,"41":1,"00":0,"01":1,"02":2,"03":3},
			"Y":{"12":1,"22":2,"32":3,"41":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"K":{"Capital":{"X":{"10":0,"12":2,"20":0,"21":1,"30":0,"32":2,"40":0,"43":3,"00":0,"03":3},
			"Y":{"10":1,"12":1,"20":2,"21":2,"30":3,"32":3,"40":4,"43":4,"00":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"L":{"Capital":{"X":{"10":0,"20":0,"30":0,"40":0,"41":1,"42":2,"00":0},
			"Y":{"10":1,"20":2,"30":3,"40":4,"41":4,"42":4,"00":0}},"Small":{"X":{},
			"Y":{}}},"M":{"Capital":{"X":{"10":0,"11":1,"13":3,"14":4,"20":0,"22":2,"24":4,"30":0,"34":4,"40":0,"44":4,"00":0,"04":4},
			"Y":{"10":1,"11":1,"13":1,"14":1,"20":2,"22":2,"24":2,"30":3,"34":3,"40":4,"44":4,"00":0,"04":0}},"Small":{"X":{},
			"Y":{}}},"N":{"Capital":{"X":{"10":0,"11":1,"13":3,"20":0,"22":2,"23":3,"30":0,"33":3,"40":0,"43":3,"00":0,"03":3},
			"Y":{"10":1,"11":1,"13":1,"20":2,"22":2,"23":2,"30":3,"33":3,"40":4,"43":4,"00":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"O":{"Capital":{"X":{"10":0,"13":3,"20":0,"23":3,"30":0,"33":3,"41":1,"42":2,"01":1,"02":2},
			"Y":{"10":1,"13":1,"20":2,"23":2,"30":3,"33":3,"41":4,"42":4,"01":0,"02":0}},"Small":{"X":{},
			"Y":{}}},"P":{"Capital":{"X":{"10":0,"13":3,"20":0,"21":1,"22":2,"23":3,"30":0,"40":0,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"13":1,"20":2,"21":2,"22":2,"23":2,"30":3,"40":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"Q":{"Capital":{"X":{"10":0,"13":3,"20":0,"23":3,"30":0,"32":2,"41":1,"43":3,"01":1,"02":2},
			"Y":{"10":1,"13":1,"20":2,"23":2,"30":3,"32":3,"41":4,"43":4,"01":0,"02":0}},"Small":{"X":{},
			"Y":{}}},"R":{"Capital":{"X":{"10":0,"13":3,"20":0,"21":1,"22":2,"23":3,"30":0,"32":2,"40":0,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"10":1,"13":1,"20":2,"21":2,"22":2,"23":2,"30":3,"32":3,"40":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"S":{"Capital":{"X":{"10":0,"21":1,"22":2,"33":3,"40":0,"41":1,"42":2,"01":1,"02":2,"03":3},
			"Y":{"10":1,"21":2,"22":2,"33":3,"40":4,"41":4,"42":4,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"T":{"Capital":{"X":{"12":2,"22":2,"32":2,"42":2,"00":0,"01":1,"02":2,"03":3,"04":4},
			"Y":{"12":1,"22":2,"32":3,"42":4,"00":0,"01":0,"02":0,"03":0,"04":0}},"Small":{"X":{},
			"Y":{}}},"U":{"Capital":{"X":{"10":0,"13":3,"20":0,"23":3,"30":0,"33":3,"41":1,"42":2,"00":0,"03":3},
			"Y":{"10":1,"13":1,"20":2,"23":2,"30":3,"33":3,"41":4,"42":4,"00":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"V":{"Capital":{"X":{"10":0,"14":4,"20":0,"24":4,"31":1,"33":3,"42":2,"00":0,"04":4},
			"Y":{"10":1,"14":1,"20":2,"24":2,"31":3,"33":3,"42":4,"00":0,"04":0}},"Small":{"X":{},
			"Y":{}}},"W":{"Capital":{"X":{"10":0,"14":4,"20":0,"22":2,"24":4,"30":0,"32":2,"34":4,"41":1,"42":2,"43":3,"00":0,"04":4},
			"Y":{"10":1,"14":1,"20":2,"22":2,"24":2,"30":3,"32":3,"34":3,"41":4,"42":4,"43":4,"00":0,"04":0}},"Small":{"X":{},
			"Y":{}}},"X":{"Capital":{"X":{"11":1,"13":3,"22":2,"31":1,"33":3,"40":0,"44":4,"00":0,"04":4},
			"Y":{"11":1,"13":1,"22":2,"31":3,"33":3,"40":4,"44":4,"00":0,"04":0}},"Small":{"X":{},
			"Y":{}}},
			"Y":{"Capital":{"X":{"11":1,"13":3,"22":2,"32":2,"42":2,"00":0,"04":4},
			"Y":{"11":1,"13":1,"22":2,"32":3,"42":4,"00":0,"04":0}},"Small":{"X":{},
			"Y":{}}},"Z":{"Capital":{"X":{"13":3,"22":2,"31":1,"40":0,"41":1,"42":2,"43":3,"00":0,"01":1,"02":2,"03":3},
			"Y":{"13":1,"22":2,"31":3,"40":4,"41":4,"42":4,"43":4,"00":0,"01":0,"02":0,"03":0}},"Small":{"X":{},
			"Y":{}}},"-":{"Capital":{"X":{"21":1,"22":2,"23":3},
			"Y":{"21":2,"22":2,"23":2}},"Small":{"X":{},
			"Y":{}}}}
}